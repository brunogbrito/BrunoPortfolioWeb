<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="description" content="Bruno Brito - PickPon Game">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<title>Bruno Brito - Technical Designer</title>

<!-- STYLES -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/plugins.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/prism.css" />
<link rel="stylesheet" type="text/css" href="css/extra.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!--[if lt IE 9]> <script type="text/javascript" src="js/modernizr.custom.js"></script> <![endif]-->
<!-- /STYLES -->

</head>


<body>

<script src="js/prism.js"></script>
	
<!-- WRAPPER ALL -->
<div class="arlo_tm_wrapper_all">

	<div id="arlo_tm_popup_blog">
		<div class="container">
			<div class="inner_popup scrollable"></div>
		</div>
		<span class="close"><a href="#"></a></span>
	</div>
	
	<!-- PRELOADER -->
	<div class="arlo_tm_preloader">
		<div class="spinner_wrap">
			<div class="spinner"></div>
		</div>
	</div>
	<!-- /PRELOADER -->
	
	<!-- MOBILE MENU -->
	<div class="arlo_tm_mobile_header_wrap">
		<div class="main_wrap">
			<div class="logo">
				<img src="img/logo/mobile_logo.png" alt="" />
			</div>
			<div class="arlo_tm_trigger">
				<div class="hamburger hamburger--collapse-r">
					<div class="hamburger-box">
						<div class="hamburger-inner"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="arlo_tm_mobile_menu_wrap">
   			<div class="mob_menu">
				<ul class="anchor_nav">
						<li><a href="#index.html#portfolio">Portfolio</a></li>
						<!-- <li><a href="#news">Recent Posts</a></li> -->
						<li><a href="http://www.youtube.com/playlist?list=PLB9-O_wVwLKxUOiLZDY8IsZk4Z4K4IMG3" target="_blank">Tutorials</a></li>
						<li><a href="index.html#about">About</a></li>
						<!--  <li><a href="CMS/index.php">Login</a></li> -->
						<li><a href="mailto:bruno.brito@futuregames.nu">Contact</a></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- /MOBILE MENU -->
	
    <!-- CONTENT -->
	<div class="arlo_tm_content">
		
		<!-- LEFTPART -->
		<div class="arlo_tm_leftpart_wrap">
			<div class="leftpart_inner">
				<div class="logo_wrap">
					<a href="index.html"><img src="img/logo/desktop-logo2.png" alt="" /></a>
				</div>

				<div class="menu_list_wrap">
					<ul class="anchor_nav">
						<li><a href="index.html#portfolio">Portfolio</a></li>
						<!-- <li><a href="#news">Recent Posts</a></li> -->
						<li><a href="http://www.youtube.com/playlist?list=PLB9-O_wVwLKxUOiLZDY8IsZk4Z4K4IMG3" target="_blank">Tutorials</a></li>
						<li><a href="index.html#about">About</a></li>
						<!--  <li><a href="CMS/index.php">Login</a></li> -->
					</ul>
				</div>
				
				<div class="contacttop"> 
					<i class="fa fa-envelope-o" aria-hidden="true"></i> <a> bruno.brito@futuregames.nu</a> <br> <i class="fa fa-phone" aria-hidden="true"></i> <a> +46(0)76 278 5902</a> 
				</div>
				
				<div class="leftpart_bottom">
					<div class="social_wrap">
						<ul>
							<li><a href="https://www.facebook.com/brunogbrito" target="_blank"><i class="xcon-facebook"></i></a></li>
							<li><a href="https://www.twitter.com/brunogbrito" target="_blank"><i class="xcon-twitter"></i></a></li>
							<li><a href="https://www.linkedin.com/in/brunogbrito/"><i class="xcon-linkedin"></i></a></li>
							<li><a href="https://www.instagram.com/brunogbrito/" target="_blank"><i class="xcon-instagram"></i></a></li>
						</ul>
					</div>
				</div>
				<a class="arlo_tm_resize" href="#"><i class="xcon-angle-left"></i></a>
			</div>
		</div>
		<!-- /LEFTPART -->
		
		<!-- RIGHTPART -->
		<div class="arlo_tm_rightpart">
			<div class="rightpart_inner">
				<div class="arlo_tm_portfolio_single_wrap">
					<div class="container">
						<div class="arlo_tm_title_holder news">
								<h3>Cooperative Online Shooter</h3>
								<span>October 22, 2019</span>
							</div>
						<div class="details_wrap">
							<div class="leftbox">
								<div class="name_holder">
									<h3>Project Details</h3>
								</div>
								<div class="short_list">
									<ul>
										<li>
											<span class="first">Platform: </span>
											<span class="second">PC</span>
										</li>
										<li>
											<span class="first">Genre: </span>
											<span class="second">Cooperative Third Person Shooter</span>
										</li>
										<li>
											<span class="first">Engine: </span>
											<span class="second">Unreal Engine 4</span>
										</li>
										<li>
											<span class="first">Development Time: </span>
											<span class="second">3 weeks</span>
										</li>
										<li>
											<span class="first">Team Size: </span>
											<span class="second">Personal project</span>
										</li>
									</ul>
								</div>
								<br>
								<div class="buttons_wrap2">
											<br><ul>
												<li>
													<a href="files/ASCOOP_Prototype.zip" target="_blank"><span>Download Playable Build</span></a>
												</li>
											</ul>
										</div>
							</div>
							
														<div class="rightbox">
								<div id="muteYouTubeVideoPlayer">

<script async src="https://www.youtube.com/iframe_api"></script>
<script>
 function onYouTubeIframeAPIReady() {
  var player;
  player = new YT.Player('muteYouTubeVideoPlayer', {
    videoId: 'g480gS7vu90', // YouTube Video ID
    width: 560,               // Player width (in px)
    height: 315,              // Player height (in px)
    playerVars: {
      autoplay: 1,        // Auto-play the video on load
      controls: 1,        // Show pause/play buttons in player
      showinfo: 0,        // Hide the video title
      modestbranding: 1,  // Hide the Youtube Logo
      loop: 1,            // Run the video in a loop
	  playlist: 'g480gS7vu90',
      fs: 0,              // Hide the full screen button
      cc_load_policy: 0, // Hide closed captions
      iv_load_policy: 3,  // Hide the Video Annotations
      autohide: 0         // Hide video controls when playing
    },
    events: {
      onReady: function(e) {
        e.target.mute();
      }
    }
  });
 }

 // Written by @labnol 
</script>
									
								</div>
							</div>
						</div>
						
						<h2>Concept</h2>
						<br><br>

								<p>A simple <strong>online cooperative third-person shooter prototype</strong>. This prototype was focused on experimenting with different tools for scripting in <strong>Unreal Engine (Angelscript)</strong>, <strong>online networking</strong> and <strong>gameplay scripting</strong>. </p> <br>							
						
								<p><a href="https://angelscript.hazelight.se" target="_blank"><span>UnrealEngine-Angelscript</span></a> is a set of engine modifications and a plugin for UE4 that integrates a full-featured scripting language. <strong>It is actively developed and used by Hazelight</strong>, creators of A Way Out.</p>
							<br>
							<p>I wanted to give a try in this tool to learn more about it and also to prove that <strong>I can adapt to different toolsets.</strong></p><br>
						
								I used a simple prototype polygon asset pack to blockout the level.
							<br>
						<br><br>
						
						<div class="details_wrap">
						
							<div class="leftbox">
								<div class="name_holder">
									<h3>Roles and Responsibilities</h3>
								</div>
									<div class="short_list">
										<ul>
											<li>
												<span class="first"><h6><strong>Gameplay scripting</strong></h6></span>
												<br><p>I scripted the entire gameplay from scratch using Angelscript and Blueprints</p>
											</li>
											<br>
											<li>
												<span class="first"><h6><strong>Online Multiplayer</strong></h6></span>
												<br><p>I set up a dedicated server online multiplayer</p>
											</li>
											<br>
											<li>
												<span class="first"><h6><strong>Level Design</strong></h6></span>
												<br><p>I designed and blocked out the level</p>
											</li>
										</ul>
								</div>
							</div>	
							<div class="rightbox">
								<video autoplay loop muted playsinline width="100%" height="auto">
  														<source src="img/portfolio/Coop/COOP_03.mp4" type="video/mp4"></video>	
							</div>
						</div>

						<br><br>
						
								<h2>Rapid Prototyping</h2>
								<br><br>
								
								<p>It took me 3 weeks to build this prototype, during this time I learned how to script world events and characters abilities using Angelsrcipt + Online Networking. </p>
								<br>
						
												<div class="details_wrap">
														
							<div class="leftbox">
								
								<div class="name_holder">
									<br>
									<h3>Level Design</h3>
									<br>
									<p>The level is inspired by Stockholm subway stations <strong>Medborgarplatsen</strong> and <strong>SÃ¶dra</strong>. I used a simple polygon asset pack to <strong>block out the entire level and train wagons</strong>. I chose 4 colors to categorize the block out assets. <br><strong>White: Floors</strong> <br><strong>Yellow: Walls</strong> <br><strong>Blue: Interactable or destroyable</strong> <br><strong>Red: Enemies or explosives</strong></p>
									<br>
									<br><br>
								</div>
							</div>
							<div class="rightbox">
								<video autoplay loop muted playsinline width="100%" height="auto">
  									<source src="img/portfolio/Coop/COOP_01.mp4" type="video/mp4"></video>
							</div>
							
						</div>		
						
							
						
						<div class="details_wrap">
														
							<div class="leftbox">
								
								<div class="name_holder">
									<br>
									<h3>Character and Networking</h3>
									<br>
									<p>I decide to develop the character in <strong>third-person</strong>, it was a good challenge on learning how to <strong>replicate not only the character actions but also animations</strong>. The character class, character components and weapon were <strong>90% scripted in Angelscript and 10% in blueprints</strong>. The game UI was entirely scripted in blueprints.<br><br> Special thanks to Emanuel Axelsson for making the UI art assets :) </p>
									<br><br>
									<button class="collapsible" onclick="showDiv('camera')">See the code snipet</button>
								</div>
							</div>
							<div class="rightbox">
								<video autoplay loop muted playsinline width="100%" height="auto">
  									<source src="img/portfolio/Coop/COOP_02.mp4" type="video/mp4"></video>
							</div>
							
						</div>		
						
							<div id="camera" class="content">
								
								<div class="name_holder">
									<br>
									<h3>Character Class</h3>
									<br>
								</div>

<pre style"width:300px" class="line-numbers"><code class="language-cs">
import Character.COOPHealthComponent;
import Weapons.COOPWeapon;
import UI.COOPHUDWidget;

event void FOnDisarm();

class ACoopCharacter : ACharacter
{

    default CapsuleComponent.SetCollisionResponseToChannel(ECollisionChannel::ECC_GameTraceChannel1, ECollisionResponse::ECR_Ignore);

	//Components
    UPROPERTY(DefaultComponent, BlueprintReadOnly, Category = "Components")
    USpringArmComponent SpringArm;
    default SpringArm.bUsePawnControlRotation = true;
    
    UPROPERTY(DefaultComponent, BlueprintReadOnly, Category = "Components", Attach = SpringArm)
    UCameraComponent CharacterCamera;

    UPROPERTY(DefaultComponent, Category = "Components")
    UInputComponent PlayerInputComponent;

    UPROPERTY(DefaultComponent, Category = "Components")
    UCOOPHealthComponent HealthComponent;
    default HealthComponent.SetActive(false);

	UPROPERTY(Replicated)
	FOnDisarm DisarmSignature;

	//Character
	UPROPERTY()
	float WalkingSpeed = 430.0f;

	UPROPERTY()
	float RunningSpeed = 550.0f;

	UPROPERTY(Replicated)
	float NewSpeed;

	UPROPERTY(Replicated, Category = "Character")
	bool bIsCrouch;

	UPROPERTY(ReplicatedUsing=OnRep_PlayerIsDead, Category = "Character")
	bool bIsDead;

	UPROPERTY(Replicated, Category = "Character")
	bool bIsZooming;

	UPROPERTY(Replicated, Category = "Character")
	bool bIsFiring;

	UPROPERTY(Replicated, Category = "Character")
	float CharacterDeathLifeSpan = 3.0f;

	UPROPERTY(Replicated, Category = "Character")
	bool bIsReloading;

	//Weapon
    UPROPERTY(Replicated, AdvancedDisplay, Category = "Weapons")
    TSubclassOf<ACoopWeapon> MyWeaponClass;

    UPROPERTY(Replicated, Category = "Weapons")
    ACoopWeapon MyWeaponReference;

    UPROPERTY(Category = "Weapons")
    TSubclassOf<UCameraShake> FireCamShake;

    UPROPERTY(Category = "Weapons")
    bool bShakeCamera;

	UPROPERTY(Replicated)
	float AimYaw;

	UPROPERTY(Replicated)
	float AimPitch;

	UPROPERTY(Replicated)
	bool bCanDisarm = false;

	UPROPERTY()
	TSubclassOf<UUserWidget> CrosshairRef;

	UPROPERTY()
	TSubclassOf<UCOOPHUDWidget> HudRef;

	UPROPERTY(DefaultComponent)
	UWidgetComponent PlayerHUD;

	TSubclassOf<UDamageType> MyDamageType;

	default bUseControllerRotationYaw = false;
	default SetReplicates(true);
	default bReplicateMovement = true;


    UFUNCTION(BlueprintOverride)
    void BeginPlay()
    {
        BindInput();
		HealthComponent.OnDealDamageSignature.AddUFunction(this, n"DamageImpactAnimation");
		if(LocalRole == ENetRole::ROLE_Authority)
		{
			bIsDead = false;
			bIsReloading = false;
			HealthComponent.OnDeadSignature.AddUFunction(this, n"OnPlayerDeath");
			SpawnWeapon(MyWeaponClass);
			NewSpeed = WalkingSpeed;
		}
    }

	UFUNCTION(BlueprintOverride)
	void Tick(float DeltaSeconds)
	{
		CharacterMovement.MaxWalkSpeed = FMath::FInterpTo(CharacterMovement.MaxWalkSpeed, NewSpeed, DeltaSeconds, 5.0f);
		if(LocalRole == ENetRole::ROLE_Authority)
		{
			UpdateYaw();
		}
	}

	UFUNCTION(Server)
	void UpdateYaw()
	{
		AimYaw = FMath::ClampAngle(FRotator(FRotator(GetControlRotation() - GetActorRotation()).Normalized).Yaw, -90.0f, 90.0f);
		AimPitch = FMath::ClampAngle(FRotator(FRotator(GetControlRotation() - GetActorRotation()).Normalized).Pitch, -90.0f, 90.0f);
	}

    UFUNCTION()
    void BindInput()
    {
        if(PlayerInputComponent != nullptr)
        {           
            PlayerInputComponent.BindAxis(n"GoForward", FInputAxisHandlerDynamicSignature(this, n"MoveForward"));
            PlayerInputComponent.BindAxis(n"GoRight", FInputAxisHandlerDynamicSignature(this, n"MoveRight"));
            PlayerInputComponent.BindAxis(n"MousePitch", FInputAxisHandlerDynamicSignature(this, n"LookUp"));
            PlayerInputComponent.BindAxis(n"MouseYaw", FInputAxisHandlerDynamicSignature(this, n"Turn"));

            PlayerInputComponent.BindAction(n"Sprint", EInputEvent::IE_Pressed, FInputActionHandlerDynamicSignature(this, n"BeginSprint"));
            PlayerInputComponent.BindAction(n"Sprint", EInputEvent::IE_Released, FInputActionHandlerDynamicSignature(this, n"EndSprint"));

            PlayerInputComponent.BindAction(n"Crouch", EInputEvent::IE_Pressed, FInputActionHandlerDynamicSignature(this, n"BeginCrouch"));
            PlayerInputComponent.BindAction(n"Crouch", EInputEvent::IE_Released, FInputActionHandlerDynamicSignature(this, n"EndCrouch"));

            PlayerInputComponent.BindAction(n"Jump", EInputEvent::IE_Released, FInputActionHandlerDynamicSignature(this, n"BeginJump"));

			PlayerInputComponent.BindAction(n"Disarm", EInputEvent::IE_Pressed, FInputActionHandlerDynamicSignature(this, n"Disarm"));

			PlayerInputComponent.BindAction(n"Reload", EInputEvent::IE_Pressed, FInputActionHandlerDynamicSignature(this, n"StartReloadWeapon"));

            PlayerInputComponent.BindAction(n"Fire", EInputEvent::IE_Pressed, FInputActionHandlerDynamicSignature(this, n"StartTrigger"));
            PlayerInputComponent.BindAction(n"Fire", EInputEvent::IE_Released, FInputActionHandlerDynamicSignature(this, n"EndTrigger"));   
        }
    }

	/*
	 * Input Binds
	 */

    UFUNCTION()
    void MoveForward(float AxisValue)
    {
        AddMovementInput(GetActorForwardVector() * AxisValue);
        GetMovementComponent().NavAgentProps.bCanCrouch = true;
    }

    UFUNCTION()
    void MoveRight(float Value)
    {
        AddMovementInput(GetActorRightVector() * Value);
    }

    UFUNCTION()
    void LookUp(float Value)
    {
        AddControllerPitchInput(-Value);
    }

    UFUNCTION()
    void Turn(float Value)
    {
        AddControllerYawInput(Value);
    }

    UFUNCTION()
    void BeginCrouch(FKey Key)
    {
		Crouch();
		if(LocalRole < ENetRole::ROLE_Authority)
		{
			ServerCrouch(true);
		}
    }

    UFUNCTION()
    void EndCrouch(FKey Key)
    {
		UnCrouch();
		if(LocalRole < ENetRole::ROLE_Authority)
		{
			ServerCrouch(false);
		}
    }

    UFUNCTION()
    void BeginSprint(FKey Key)
    {
		
		if(bIsCrouched == false)
		{
			ServerSprint(RunningSpeed);
		}
		else
		{
			ServerSprint(WalkingSpeed);
		}
    }

    UFUNCTION()
    void EndSprint(FKey Key)
    {
		if(LocalRole < ENetRole::ROLE_Authority)
		{
			ServerSprint(WalkingSpeed);
		}
    }

    UFUNCTION()
    void BeginJump(FKey Key)
    {
        if(!bWasJumping)
        {
            Jump();
        }
    }

    UFUNCTION()
    void StartTrigger(FKey Key)
    {
        MyWeaponReference.StartFire();
        return;
    }

    UFUNCTION(BlueprintEvent)
    void EndTrigger(FKey Key)
    {
        MyWeaponReference.EndFire();
		bIsFiring = false;
        return;
    }

	UFUNCTION(BlueprintEvent)
	void StartReloadWeapon(FKey Key)
	{
		if(LocalRole < ENetRole::ROLE_Authority)
		{
			ServerReload();
		}

		if(!bIsReloading && !MyWeaponReference.CanReload())
		{
			MyWeaponReference.bIsCurrentReloading = true;
			bIsReloading = true;
		}
	}

	UFUNCTION()
	void Disarm(FKey Key)
	{
		
		if(LocalRole < ENetRole::ROLE_Authority)
		{
			ServerDisarm();
			return;
		}

		if(bCanDisarm)
		{
			P();
			DisarmSignature.Broadcast();
		}

	}

    UFUNCTION(BlueprintEvent)
    void OnPlayerDeath()
    {
        if(!bIsDead)
		{
			//DEBUG
			if(CVar_DebugWeaponDrawing.GetInt() > 0)
			{
				Print("I'm dead", 1.0f, FLinearColor::LucBlue);
			}

			if(LocalRole == ENetRole::ROLE_Authority)
			{
				bIsDead = true;
			}


			//Detach Weapon
			if(MyWeaponReference != nullptr)
			{
				MyWeaponReference.ServerDetachWeapon();
				MyWeaponReference.FireSignature.Clear();
				MyWeaponReference = nullptr;
			}
			
			//Disable Input + Destroy Actor			
			DetachFromControllerPendingDestroy();
			SetLifeSpan(CharacterDeathLifeSpan);
		}
        return;
    }

	/*
	 * Weapon
	 */

    UFUNCTION()
    void SpawnWeapon(TSubclassOf<ACoopWeapon> WeaponClass)
    {
		if(WeaponClass.IsValid())
		{
			AActor MySpawnedWeapon = SpawnActor(WeaponClass, FVector::ZeroVector, FRotator::ZeroRotator);
			MySpawnedWeapon.AttachToComponent(Mesh, n"WeaponSocket", EAttachmentRule::SnapToTarget);
			MySpawnedWeapon.SetOwner(this);
			MyWeaponReference = Cast<ACoopWeapon>(MySpawnedWeapon);
			MyWeaponReference.GetOwnerProperties(CharacterCamera);
			MyWeaponReference.FireSignature.AddUFunction(this, n"WeaponFired");
			MyWeaponReference.MagazineSignature.AddUFunction(this, n"StartReloadWeapon");
		}
    }

	UFUNCTION(BlueprintEvent)
    void WeaponFired(ACharacter OwnerCharacter)
    {

		if(bShakeCamera == true)
        {        
            APlayerController PC = Cast<APlayerController>(OwnerCharacter.GetController());
            if(PC != nullptr)
            {
                PC.ClientPlayCameraShake(FireCamShake);
            }
            else
            {
                Print("Camera will not shake. Player Controller is NULL", 2.0f);
            }
        }
		bIsFiring = true;
		ServerFiringAnimation();
    }

	UFUNCTION(BlueprintEvent)
	void FinishReloadWeapon()
	{
		MyWeaponReference.ReloadClip();
		MyWeaponReference.bIsCurrentReloading = false;
		bIsReloading = false;
	}

	/*
	 * Damage
	 */

	UFUNCTION(BlueprintOverride)
	void RadialDamage(float DamageReceived, const UDamageType DamageType, FVector Origin, FHitResult HitInfo, AController InstigatedBy, AActor DamageCauser)
	{
		//DEBUG
		if(CVar_DebugWeaponDrawing.GetInt() > 0)
        {
			System::DrawDebugString(Origin, FString("Radial Damage: " + DamageReceived) , nullptr, FLinearColor::White, 1.0f);
		}
	}

	UFUNCTION(BlueprintOverride)
	void PointDamage(float DamageReceived, const UDamageType DamageType, FVector HitLocation, FVector HitNormal, UPrimitiveComponent HitComponent, FName BoneName, FVector ShotFromDirection, AController InstigatedBy, AActor DamageCauser, FHitResult HitInfo)
	{
		//DEBUG
		if(CVar_DebugWeaponDrawing.GetInt() > 0)
        {
			System::DrawDebugString(HitLocation, FString("PointDamage: " + DamageReceived) , nullptr, FLinearColor::White, 1.0f);
		}

		Gameplay::ApplyDamage(this, DamageReceived, InstigatedBy, DamageCauser, MyDamageType);
	}

	UFUNCTION(BlueprintEvent)
	void DamageImpactAnimation(float Damage, float Health, const UDamageType DamageType, AController InstigatedBy, AActor DamageCauser)
	{
		return;
	}

	/*
	 * Networking 
	 */

	UFUNCTION(Server)
	void ServerSprint(float Value)
	{
		NewSpeed = Value;
	}

	UFUNCTION(Server)
	void ServerCrouch(bool Crouching)
	{
		if(Crouching)
		{
			bIsCrouch = true;
		}
		else
		{
			bIsCrouch = false;
		}
	}

	UFUNCTION(Server)
	void ServerReload()
	{
		FKey Key;
		StartReloadWeapon(Key);
	}

	UFUNCTION(Server)
	void ServerFiringAnimation()
	{
		PlayFiringAnimation();
	}

	UFUNCTION(NetMulticast, BlueprintEvent)
	void PlayFiringAnimation()
	{
		return;
	}

	UFUNCTION()
	void OnRep_PlayerIsDead()
	{
		RemovePlayerWidgets();
	}

	UFUNCTION(BlueprintEvent)
	void RemovePlayerWidgets()
	{
		return;
	}

	UFUNCTION(Server)
	void ServerDisarm()
	{
		FKey Key;
		Disarm(Key);
	}
}
</code></pre>

<div class="name_holder">
									<br>
									<h3>Health Component</h3>
									<br>
								</div>

<pre style"width:300px" class="line-numbers"><code class="language-cs">
import Core.COOPStatics;

event void FOnDealDamage(float Damage, float Health, const UDamageType DamageType, AController InstigatedBy, AActor DamageCauser);
event void FOnDead();

class UCOOPHealthComponent : UActorComponent
{

    UPROPERTY(ReplicatedUsing=OnRep_Health, BlueprintReadOnly)
    float Health;

    UPROPERTY()
    float MaxHealth = 500.0f;

	UPROPERTY(Replicated)
	bool bIsDead;

    UPROPERTY()
    FOnDealDamage OnDealDamageSignature;

    UPROPERTY()
    FOnDead OnDeadSignature;

	default SetIsReplicated(true);


    UFUNCTION(BlueprintOverride)
    void BeginPlay()
    {
		if(GetOwner().LocalRole == ENetRole::ROLE_Authority)
		{
			AActor MyOwner = GetOwner();
			if(MyOwner != nullptr)
			{
				MyOwner.OnTakeAnyDamage.AddUFunction(this, n"DealDamage");
			}
		}
        Health = MaxHealth;
		bIsDead = false;      
    }

    UFUNCTION()
    void DealDamage(AActor DamagedActor, float Damage, const UDamageType DamageType, AController InstigatedBy, AActor DamageCauser)
    {
		Health = Health - Damage;
		if(Health > 0 && !bIsDead)
        {
            OnDealDamageSignature.Broadcast(Damage, Health, DamageType, InstigatedBy, DamageCauser);
			
			//DEBUG
			if(CVar_DebugHealthComponents.GetInt() > 0)
			{
				Print(FString(DamagedActor.GetName() + " Damage Taken: " + Damage), 1.0f, FLinearColor::Yellow);
			}
		}
        else if(!bIsDead)
        {
            //DEBUG
			if(CVar_DebugHealthComponents.GetInt() > 0)
			{
				Print(FString(DamagedActor.GetName() + " HealthComponent: Health is below 0"), 1.0f, FLinearColor::Yellow);
			}
			bIsDead = true;
			OnDeadSignature.Broadcast();
        }
    }

	UFUNCTION()
	void OnRep_Health(float OldHealth)
	{
		float Damage = Health - OldHealth;
		const UDamageType DamageType;
		OnDealDamageSignature.Broadcast(Damage, Health, DamageType, GetOwner().GetInstigatorController(), GetOwner());
	}
}
</code></pre>
<br><br><br><br>

		</div>
						
						<div class="details_wrap">
														
							<div class="leftbox">
								
								<div class="name_holder">
									<br>
									<h3>Gameplay and Mission</h3>
									<br>
									<p>Players start the level in station A and the<strong> objective is to reach station B and deactivate two computers.</strong> In this level a developed a <strong>loopable subway system</strong>, allowing players to travel between stations. <br><br> To add more action while traveling we trigger a world event spawning another train convoy full of enemies. <strong>The train wagons follow a spline path and wiggle using a simple cosine math function.</strong>  </p>
									<br><br>
								</div>
							</div>
							<div class="rightbox">
								<video autoplay loop muted playsinline width="100%" height="auto">
  									<source src="img/portfolio/Coop/COOP_03.mp4" type="video/mp4"></video>
							</div>
							
						</div>		
						
							<div id="manager" class="content">
								
								
<br><br><br><br>

		</div>
						
						<div class="pagination_wrap">
							<div class="previ">
								<a href="index.html#portfolio">Go back</a>
							</div>
							
						</div>
					</div>
				</div>
				
				
				<!-- CONTACT & FOOTER -->
				<div class="arlo_tm_section" id="contact">
					<div class="arlo_tm_footer_contact_wrapper_all">
						<div class="arlo_tm_footer_wrap">
							<div class="container">
								<!-- <p>&copy; Copyright 2019. All Rights are Reserved.</p> -->
							</div>
						</div>
					</div>
				</div>
				<!-- /CONTACT & FOOTER -->
				
			</div>
		</div>
		<!-- /RIGHTPART -->
		
		<a class="arlo_tm_totop" href="#"></a> 
		
	</div>
</div>
<!-- / WRAPPER ALL -->
	
<!-- SCRIPTS -->
<script src="js/jquery.js"></script>
<!--[if lt IE 10]> <script type="text/javascript" src="js/ie8.js"></script> <![endif]-->	
<script src="js/plugins.js"></script>
<script src="js/init.js"></script>
<!-- /SCRIPTS -->

</body>
</html>